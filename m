Return-Path: <linux-integrity-owner@vger.kernel.org>
X-Original-To: lists+linux-integrity@lfdr.de
Delivered-To: lists+linux-integrity@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id E100425BAC
	for <lists+linux-integrity@lfdr.de>; Wed, 22 May 2019 03:39:27 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727208AbfEVBj1 (ORCPT <rfc822;lists+linux-integrity@lfdr.de>);
        Tue, 21 May 2019 21:39:27 -0400
Received: from linux.microsoft.com ([13.77.154.182]:34888 "EHLO
        linux.microsoft.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726466AbfEVBj1 (ORCPT
        <rfc822;linux-integrity@vger.kernel.org>);
        Tue, 21 May 2019 21:39:27 -0400
Received: from [10.200.157.26] (unknown [131.107.160.154])
        by linux.microsoft.com (Postfix) with ESMTPSA id 4FE2C20B7194;
        Tue, 21 May 2019 18:39:26 -0700 (PDT)
Subject: Re: IMA signature generated by evmctl has unexpected key identifier
To:     Mimi Zohar <zohar@linux.ibm.com>, linux-integrity@vger.kernel.org
References: <alpine.LRH.2.21.1905092048590.7180@linuxonhyperv3.guj3yctzbm1etfxqx2vob5hsef.xx.inter>
 <90a4d769-4c32-4b2b-ceaa-6e0980d5c193@linux.microsoft.com>
 <1557854750.4139.65.camel@linux.ibm.com>
 <4b810e48-6ddc-19d0-9fc1-70cd29c7c01b@linux.microsoft.com>
 <1557869914.4139.73.camel@linux.ibm.com>
 <5d1ab46e-ea01-b7a7-4a9b-6e4bcb63c331@linux.microsoft.com>
 <cea244c1-f457-cdc0-e39b-c9381cb4dc79@linux.microsoft.com>
 <1558485033.4039.215.camel@linux.ibm.com>
From:   Lakshmi <nramas@linux.microsoft.com>
Message-ID: <c4637e97-7d7f-22da-fad2-b8ec4518c3e1@linux.microsoft.com>
Date:   Tue, 21 May 2019 18:39:26 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <1558485033.4039.215.camel@linux.ibm.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Language: en-US
Content-Transfer-Encoding: 8bit
Sender: linux-integrity-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-integrity.vger.kernel.org>
X-Mailing-List: linux-integrity@vger.kernel.org

On 5/21/19 5:30 PM, Mimi Zohar wrote:
> 
> Have you tried using "evmctl ima_verify" to verify the signature after
> signing the file?
Yes - I have. It fails with the following error. I have tried multiple 
signing keys, but no luck.

evmctl ima_verify --key /etc/keys/x509_evm.der /boot/vmlinuz-5.1.0-rc2+
/boot/vmlinuz-5.1.0-rc2+: RSA_public_decrypt() failed: -1
error:0407008A:rsa routines:RSA_padding_check_PKCS1_type_1:invalid padding
error:04067072:rsa routines:rsa_ossl_public_decrypt:padding check failed

> 
> Perhaps it's something with the key. Â If you haven't already used the
> scripts for generating the keys in the ima-evm-utils examples/
> directory, you might try that.
I'll give this a try.

Thanks,
  -lakshmi
